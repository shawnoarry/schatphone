# SchatPhone 操作指南（新版）

更新时间：2026-02-10

本指南用于你日常开发、验收和提交流程，内容已与当前代码同步。

## 1. 开发前准备

进入项目目录：

```bash
cd h:\SchatPhone\schatphone
```

安装依赖：

```bash
npm install
```

启动开发：

```bash
npm run dev
```

## 2. 当前核心结构（你最常用）

- 首页：`/home`
- 设置主页：`/settings`
- 用户信息：`/profile`
- 世界书：`/worldbook`
- 网络 API：`/network`
- 外观工坊：`/appearance`
- 聊天：`/chat`

## 3. Home 入口说明（当前默认）

第一屏：
- Widget：weather、calendar、music
- App：Network、Chat、Wallet、Themes

第二屏：
- Widget：system、quick_heart、quick_disc
- App：Phone、Map、Calendar、Files、Stock

说明：
- Profile、WorldBook 已从 Home 移除，避免与 Settings 重复。

## 4. Settings 分层说明（iOS 风格）

Settings 首页包含：
- 用户卡片（进入 Profile）
- 内容设置：世界书、通用、通知
- 数据与安全：备份导出、关于

独立入口：
- Network（API）
- Appearance（美化）

## 5. 保存规则（当前）

所有用户输入页都提供显式保存按钮：
- Profile
- WorldBook
- Network
- Appearance
- Settings 的通用、通知子页

同时系统仍保留自动持久化机制（双保险）。

## 6. 新增功能的标准流程

1. 新建页面：`src/views/XXXView.vue`
2. 注册路由：`src/router/index.js`
3. 需要 Home 入口时再挂图标（避免先堆入口）
4. 状态放进对应 Store（system/chat/map）
5. API 调用统一走 `src/lib/ai.js`
6. 如有配置输入，补“保存按钮”
7. 更新文档：`PROJECT_STATUS.md` + `ARCHITECTURE.md`

## 7. 提交前检查（必做）

```bash
npm run lint
npm run build
```

如涉及核心功能，建议再跑：

```bash
npm run test
```

## 8. Git 与部署

本地提交：

```bash
git add .
git commit -m "feat: your message"
```

推送：

```bash
git push origin main
```

GitHub Pages：
- 仓库 Settings -> Pages -> Source 选择 `GitHub Actions`
- 推送 `main` 后自动触发部署

## 9. 常见问题

1. 首页仍显示旧入口
- 原因：本地旧布局缓存
- 处理：进一次设置并保存，或后续增加“重置 Home 布局”按钮

2. 模型拉取失败
- 先检查 URL/Key 是否正确
- 再看是否有 CORS 或网关限制
- 可先手动填写 model 兜底

3. 看起来改了但没生效
- 检查是否点击了保存按钮
- 刷新页面确认

## 10. 你当前最应该做的下一步

1. 先定 Home 可编辑方案（拖拽/隐藏/重置）
2. 再补 Network 错误提示分级
3. 再推进 Chat 会话管理（置顶/未读/分组）
