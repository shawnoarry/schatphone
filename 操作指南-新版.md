# SchatPhone 操作指南（架构版）

本指南基于 `ARCHITECTURE.md`，用于日常开发与扩展。

## 1. 快速开始

安装依赖：
```
npm install
```

启动开发服务：
```
npm run dev
```

构建与预览：
```
npm run build
npm run preview
```

## 2. 技术栈（摘要）

- Vue 3 + `script setup`
- Vite 7
- Vue Router 5（Hash 模式）
- Pinia 3
- Tailwind CSS v4（Vite 插件方式）
- ESLint + Prettier
- Vitest + Vue Test Utils
- GitHub Actions（CI + Pages）

## 3. 目录结构与职责

```
src/
  App.vue                 # 应用外壳（状态栏/壁纸/路由出口）
  main.js                 # 入口（Pinia + Router + 样式）
  style.css               # 主题变量与全局样式
  router/index.js         # 路由配置（Hash）
  stores/
    system.js             # 系统/主题/用户配置
    chat.js               # 联系人与聊天数据
  views/                  # 页面视图
  lib/ai.js               # AI 请求封装
```

## 4. Tailwind v4 初始化（本项目方式）

安装 Vite 插件：
```
npm install -D @tailwindcss/vite
```

在 `vite.config.js` 中启用：
```
import tailwindcss from '@tailwindcss/vite'
export default defineConfig({
  plugins: [vue(), tailwindcss()],
})
```

在 `src/style.css` 顶部加入：
```
@import "tailwindcss";
```

## 5. 主题与样式规范

1) 所有可配置颜色写在 `src/style.css` 的 `:root` 变量中  
2) 页面中尽量使用变量驱动（例如 `--chat-*`）  
3) 主题切换由 `.app-shell[data-theme="..."]` 控制  

## 6. 路由与页面新增流程

新增页面步骤：
1. 在 `src/views` 创建新页面（如 `FooView.vue`）
2. 在 `src/router/index.js` 注册路由
3. 在 `HomeView.vue` 的入口按钮上跳转路由

## 7. 状态管理规范

- 系统设置/主题/用户：`system` store  
- 聊天数据：`chat` store  
- AI 调用统一放 `lib/ai.js`，禁止在组件内重复写 fetch

## 8. 环境变量（.env.example）

```
VITE_API_PROVIDER
VITE_API_URL
VITE_API_MODEL
VITE_API_KEY
```

本地可复制为 `.env`，敏感信息不要提交。

## 9. 代码规范与测试

代码检查：
```
npm run lint
npm run lint:fix
```

格式化：
```
npm run format
```

测试：
```
npm run test
```

## 10. 部署（GitHub Pages）

1) 提交并推送到 `main`  
2) GitHub Actions 自动构建与部署  
3) 地址：`https://shawnoarry.github.io/schatphone/`

## 11. 建议开发顺序

1) 先完成页面拆分（views、stores、router）
2) 再完善主题变量与 UI
3) 最后接入 AI 接口和高级交互（滑动、手势等）
